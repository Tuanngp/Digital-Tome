<!DOCTYPE html>
<html lang="en">
<head th:replace="~{layout/head :: head}"><title>Home</title></head>
<style>
    .dz-media {
        height: 300px; /* Đặt chiều cao cố định cho container */
        /*width: 172px;*/
        overflow: hidden; /* Ẩn phần hình ảnh nằm ngoài container */
    }
    .dz-media img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
</style>
<body>
<div class="page-wraper">
    <div class="preloader-wrapper-1" id="loading-area">
        <div class="preloader-inner">
            <div class="preloader-shade"></div>
            <div class="preloader-wrap"></div>
            <div class="preloader-wrap wrap2"></div>
            <div class="preloader-wrap wrap3"></div>
            <div class="preloader-wrap wrap4"></div>
            <div class="preloader-wrap wrap5"></div>
        </div>
    </div>

    <header th:replace="~{layout/header :: header}"></header>


    <div class="page-content">
        <!-- inner page banner -->
        <div class="dz-bnr-inr overlay-secondary-dark dz-bnr-inr-sm"
             style="background-image:url(static/user/images/background/bg3.jpg);">
            <div class="container">
                <div class="dz-bnr-inr-entry">
                    <h1>Favorite list</h1>
                    <nav aria-label="breadcrumb" class="breadcrumb-row">
                        <ul class="breadcrumb">
                            <li class="breadcrumb-item"><a th:href="@{/}"> Home</a></li>
                            <li class="breadcrumb-item">Favorite list</li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        <!-- inner page banner End-->
        <section class="content-inner-1 border-bottom">
            <div class="container">
                <div class="acod-content collapse " id="collapseExample">
                    <div class="widget widget_services">
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox1" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox1">
                                Architecture
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox2" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox2">
                                Art
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox3" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox3">
                                Action
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox4" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox4">
                                Biography & Autobiography
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox5" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox5">
                                Body, Mind & Spirit
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox6" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox6">
                                Business & Economics
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox7" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox7">
                                Children Fiction
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox8" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox8">
                                Children Non-Fiction
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox9" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox9">
                                Comics & Graphic Novels
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox10" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox10">
                                Cooking
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox11" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox11">
                                Crafts & Hobbies
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox12" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox12">
                                Design
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox13" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox13">
                                Drama
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox14" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox14">
                                Education
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox15" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox15">
                                Family & Relationships
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox16" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox16">
                                Fiction
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox17" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox17">
                                Foreign Language Study
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox18" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox18">
                                Games
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox19" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox19">
                                Gardening
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox20" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox20">
                                Health & Fitness
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox21" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox21">
                                History
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox22" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox22">
                                House & Home
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox23" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox23">
                                Humor
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox24" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox24">
                                Literary Collections
                            </label>
                        </div>
                        <div class="form-check search-content">
                            <input class="form-check-input" id="productCheckBox25" type="checkbox" value="">
                            <label class="form-check-label" for="productCheckBox25">
                                Mathematics
                            </label>
                        </div>
                    </div>
                </div>
                <div th:if="${favorites.size() == 0}">
                    <h2>No books in your favorite list.</h2>
                </div>
                <div class="row book-grid-row">
                        <div class="col-book style-1" th:each="fav : ${favorites}">
                            <div class="dz-shop-card style-1" th:href="'books/'+${fav.getBookEntity().getIsbn()}">
                                <div class="dz-media">
                                    <img alt="book" th:src="${fav.getBookEntity().getBookCover()}">
                                </div>
                                <div class="bookmark-btn style-2" >
                                    <input class="form-check-input" id="flexCheckDefault1" type="checkbox" >
                                    <label class="form-check-label" for="flexCheckDefault1" th:data-fav-id="${fav.getId()}">
                                        <i class="flaticon-close" th:data-fav-id="${fav.getId()}"></i>
                                    </label>
                                </div>
                                <div class="dz-content">
                                    <h5 class="title"><a th:href="@{'/books/' + ${fav.getBookEntity().getIsbn()}}">Thunder Stunt</a></h5>
                                    <ul class="dz-tags" th:each="category : ${fav.getBookEntity().getCategoryEntityList()}">
                                        <li><a th:href="@{books-grid-view}" th:text="${category.getName().toUpperCase()}"></a></li>
                                    </ul>
                                    <ul class="dz-rating">
                                        <li><i class="flaticon-star text-yellow"></i></li>
                                        <li><i class="flaticon-star text-yellow"></i></li>
                                        <li><i class="flaticon-star text-yellow"></i></li>
                                        <li><i class="flaticon-star text-yellow"></i></li>
                                        <li><i class="flaticon-star text-yellow"></i></li>
                                    </ul>
                                    <div class="book-footer">
                                        <div class="price">
                                            <span class="price-num" th:text="${fav.getBookEntity().getPoint()}">$54.78</span>
                                        </div>
                                        <a class="btn btn-secondary box-btn btnhover btnhover2" th:href="@{'/books/' + ${fav.getBookEntity().getIsbn()}}">See details</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
<!--                <div class="row page mt-0">-->
<!--                    <div class="col-md-6">-->
<!--                        <p class="page-text">Showing 12 from 50 data</p>-->
<!--                    </div>-->
<!--                    <div class="col-md-6">-->
<!--                        <nav aria-label="Blog Pagination">-->
<!--                            <ul class="pagination style-1 p-t20">-->
<!--                                <li class="page-item"><a class="page-link prev" href="javascript:void(0);">Prev</a></li>-->
<!--                                <li class="page-item"><a class="page-link active" href="javascript:void(0);">1</a></li>-->
<!--                                <li class="page-item"><a class="page-link" href="javascript:void(0);">2</a></li>-->
<!--                                <li class="page-item"><a class="page-link" href="javascript:void(0);">3</a></li>-->
<!--                                <li class="page-item"><a class="page-link next" href="javascript:void(0);">Next</a></li>-->
<!--                            </ul>-->
<!--                        </nav>-->
<!--                    </div>-->
<!--                </div>-->
            </div>
        </section>
    </div>


    <footer th:replace="~{layout/footer :: footer}"></footer>


    <button class="scroltop" type="button"><i class="fas fa-arrow-up"></i></button>
</div>
<script>
        const checkboxes = document.querySelectorAll('.form-check-label');
        checkboxes.forEach(function (input) {
            input.addEventListener('click', function (event) {
                const favId = event.target.getAttribute('data-fav-id');
                console.log(favId);
                var userConfirmed = window.confirm('Are you sure you want to remove this book from favorites?'+ `Id: ${favId}`);
                if (userConfirmed) {
                    removeBookFromFavorites(favId);
                    event.target.closest('.col-book').remove();
                }
            });
        });

    function getBookFromFavorites() {
        fetch('/api/favorites')
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Lấy dữ liệu thành công, cập nhật giao diện
                    console.log(data.data);
                } else {
                    // Xử lý lỗi
                    console.error('Error:', data.error);
                }
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    }

    function removeBookFromFavorites(favId) {
        fetch('/api/favorites/delete/' + favId, {
            method: 'DELETE',
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Xóa thành công, cập nhật giao diện
                    location.reload();
                } else {
                    // Xử lý lỗi
                    console.error('Error:', data.error);
                }
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    }
</script>
</body>
</html>